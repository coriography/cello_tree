{% extends 'base.html' %}

{% block body %}
    <h1>{{cellist.fname}} {{cellist.lname}}</h1>

    {% if cellist.img_url %}
        <img src="{{cellist.img_url}}" alt="">
    {% endif %}

    {% if cellist.bio %}
        <p>{{cellist.bio}}</p>
    {% endif %}

    {% if cellist.cello_details %}
        <p>Instrument: {{cellist.cello_details}}</p>
    {% endif %}

    {% if cellist.music_url %}
        <a target="_blank" href="{{cellist.music_url}}">Listen here</a>
    {% endif %}

    <form id="add_link">
        <h5>add a teacher</h5>
        <input id="teacher_id" type="text" placeholder="teacher id">
        <input id="student_id" type="hidden" placeholder="student id" value="{{cellist.cellist_id}}">
        <input type="submit">
    </form>

    <p id="add_link_response"></p>

    {% if cellist.teacher_links %}
    <ul id="teachers_list">TEACHERS
        {% for teacher_link in cellist.teacher_links%}
        <li><a href="/cellist_profile/{{teacher_link.teacher_id}}">{{teacher_link.teacher.fname}} {{teacher_link.teacher.lname}}</a></li>
        {% endfor %}
    </ul>
    {% endif %}
    {% if cellist.student_links %}
    <ul id="students_list">STUDENTS
        {% for student_link in cellist.student_links%}
        <li><a href="/cellist_profile/{{student_link.student_id}}">{{student_link.student.fname}} {{student_link.student.lname}}</a></li>
        {% endfor %}
    </ul>
    <button onclick="getTree(`{{cellist.cellist_id}}`)">View in tree</button>
    <!-- <a href="/tree/{{cellist.cellist_id}}">View in tree</a> -->
    {% endif %}

    
        <h4>Forum</h4>
        <form id="add_post">
            <input id="post_content" type="textarea" placeholder="your post here">
            <input id="cellist_id_from_profile" type="hidden" value="{{cellist.cellist_id}}">
            <input type="submit">
        </form>

        {% if posts %}
            <div id="profile_forum">
                {% for post in posts %}
                    <div>
                        <h5>{{post.user.username}}</h5>
                        <h6>{{post.post_date}}</h6>
                        <p>{{post.content}}</p>
                        <button onclick="clickUpvote(`{{post.post_id}}`)">I like this post</button>
                        <p id="upvotes_count_{{post.post_id}}">{{post.upvotes|length}}</p>   
                    </div>  
                {% endfor %}
            </div>
        {% endif %}

{% endblock %}   